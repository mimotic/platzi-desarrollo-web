!function(){function a(a){alert("Ocurrio un error: "+a.code)}function b(a){var b=a.coords.latitude,d=a.coords.longitude;console.log("Tu posicion es: "+b+", "+d),$.getJSON(l+"lat="+b+"&lon="+d,c)}function c(a){v.zone=a.name,v.icon=m+a.weather[0].icon+".png",v.temp=a.main.temp-272.15,v.temp_max=a.main.temp_max-272.15,v.temp_min=a.main.temp_min-272.15,v.main=a.weather[0].main,e(v)}function d(a){var b=document.querySelector(a);return document.importNode(b.content,!0)}function e(a,b){var c,e=d("#template--city");c=b?b.split(" ")[1]:o,e.querySelector("[data-date]").innerHTML=c,e.querySelector("[data-city]").innerHTML=a.zone,e.querySelector("[data-icon]").src=a.icon,e.querySelector("[data-temp='current']").innerHTML=a.temp.toFixed(0),e.querySelector("[data-temp='max']").innerHTML=a.temp_max.toFixed(0),e.querySelector("[data-temp='min']").innerHTML=a.temp_min.toFixed(0),$(q).hide(),$(p).append(e)}function f(a){a.preventDefault(),$.getJSON(l+"q="+$(r).val(),g)}function g(a){$.getJSON(j+$(r).val(),function(b){$(r).val(""),v={},v.zone=a.name,v.icon=m+a.weather[0].icon+".png",v.temp=a.main.temp-272.15,v.temp_max=a.main.temp_max-272.15,v.temp_min=a.main.temp_min-272.15,v.main=a.weather[0].main,e(v,b.data.time_zone[0].localtime),u.push(v),localStorage.setItem("cities",JSON.stringify(u)),console.log(localStorage)})}function h(a){function b(a){a.forEach(function(a){e(a)})}a.preventDefault();var c=JSON.parse(localStorage.getItem("cities"));b(c)}var i="d6a4075ceb419113c64885d9086d5",j="https://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+i+"&q=",k="80114c7878f599621184a687fc500a12",l="http://api.openweathermap.org/data/2.5/weather?APPID="+k+"&",m="http://openweathermap.org/img/w/",n=new Date,o=n.toLocaleTimeString(),p=$("body"),q=$(".loader"),r=$("[data-input='cityAdd']"),s=$("[data-button='add']"),t=$("[data-saved-cities]"),u=[],v={};v.zone,v.icon,v.temp,v.temp_max,v.temp_min,v.main,$(s).on("click",f),$(r).on("keypress",function(a){13==a.which&&f(a)}),$(t).on("click",h),navigator.geolocation?navigator.geolocation.getCurrentPosition(b,a):alert("Tu navegador no soporta geolocalizacion, actualizate!")}();